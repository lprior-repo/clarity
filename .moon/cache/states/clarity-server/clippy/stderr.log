[1m[92m    Blocking[0m waiting for file lock on package cache
[1m[92m    Blocking[0m waiting for file lock on package cache
[1m[92m    Blocking[0m waiting for file lock on package cache
[1m[92m    Blocking[0m waiting for file lock on package cache
[1m[92m    Blocking[0m waiting for file lock on build directory
[1m[92m    Checking[0m clarity-core v0.1.0-dev (/home/lewis/src/clarity/clarity-core)
[1m[91merror[E0432][0m[1m: unresolved imports `crate::db::count_beads`, `crate::db::count_users`, `crate::db::create_bead`, `crate::db::create_user`, `crate::db::delete_bead`, `crate::db::delete_user`, `crate::db::get_bead`, `crate::db::get_user`, `crate::db::get_user_by_email`, `crate::db::list_beads`, `crate::db::list_beads_by_status`, `crate::db::list_beads_by_user`, `crate::db::list_users`, `crate::db::update_bead_priority`, `crate::db::update_bead_status`, `crate::db::update_user_email`, `crate::db::update_user_role`[0m
  [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:18:3
   [1m[94m|[0m
[1m[94m18[0m [1m[94m|[0m   count_beads, count_users, create_bead, create_user, delete_bead, delete_user, get_bead, get_user,
   [1m[94m|[0m   [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^[0m  [1m[91m^^^^^^^^[0m  [1m[91m^^^^^^^^[0m [1m[91mno `get_user` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91mno `get_bead` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91mno `delete_user` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91mno `delete_bead` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91m|[0m            [1m[91mno `create_user` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91m|[0m            [1m[91mno `create_bead` in `db`[0m
   [1m[94m|[0m   [1m[91m|[0m            [1m[91mno `count_users` in `db`[0m
   [1m[94m|[0m   [1m[91mno `count_beads` in `db`[0m
[1m[94m19[0m [1m[94m|[0m   get_user_by_email, list_beads, list_beads_by_status, list_beads_by_user, list_users,
   [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^[0m
   [1m[94m|[0m   [1m[91m|[0m                  [1m[91m|[0m
   [1m[94m|[0m   [1m[91m|[0m                  [1m[91mno `list_beads` in `db`[0m
   [1m[94m|[0m   [1m[91mno `get_user_by_email` in `db`[0m
[1m[94m20[0m [1m[94m|[0m   run_migrations, update_bead_priority, update_bead_status, update_user_email, update_user_role,
   [1m[94m|[0m                   [1m[91m^^^^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^^^^^^^[0m  [1m[91m^^^^^^^^^^^^^^^^[0m

[1m[91merror[0m[1m: unused imports: `Bead` and `UserId`[0m
  [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:21:3
   [1m[94m|[0m
[1m[94m21[0m [1m[94m|[0m   Bead, BeadId, BeadPriority, BeadStatus, BeadType, DbConfig, Email, NewBead, NewUser, UserId,
   [1m[94m|[0m   [1m[91m^^^^[0m                                                                                 [1m[91m^^^^^^[0m
   [1m[94m|[0m
   [1m[94m= [0m[1mnote[0m: `-D unused-imports` implied by `-D warnings`
   [1m[94m= [0m[1mhelp[0m: to override `-D warnings` add `#[allow(unused_imports)]`

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:153:31
    [1m[94m|[0m
[1m[94m153[0m [1m[94m|[0m   let user: crate::db::User = create_user(&pool, &new_user).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:168:3
    [1m[94m|[0m
[1m[94m168[0m [1m[94m|[0m   create_user(&pool, &new_user).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:196:39
    [1m[94m|[0m
[1m[94m196[0m [1m[94m|[0m   let created_user: crate::db::User = create_user(&pool, &new_user).await.unwrap();
    [1m[94m|[0m                                       [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:210:7
    [1m[94m|[0m
[1m[94m210[0m [1m[94m|[0m   let result = get_user(&pool, &fake_id).await;
    [1m[94m|[0m       [1m[91m^^^^^^[0m
[1m[94m211[0m [1m[94m|[0m
[1m[94m212[0m [1m[94m|[0m   assert!(result.is_err(), "Should return error for non-existent user");
    [1m[94m|[0m           [1m[94m------[0m [1m[94mtype must be known at this point[0m
    [1m[94m|[0m
[1m[96mhelp[0m: consider giving `result` an explicit type
    [1m[94m|[0m
[1m[94m210[0m [1m[94m| [0m  let result[92m: /* Type */[0m = get_user(&pool, &fake_id).await;
    [1m[94m|[0m             [92m++++++++++++[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:226:39
    [1m[94m|[0m
[1m[94m226[0m [1m[94m|[0m   let created_user: crate::db::User = create_user(&pool, &new_user).await.unwrap();
    [1m[94m|[0m                                       [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:243:7
    [1m[94m|[0m
[1m[94m243[0m [1m[94m|[0m   let result = get_user_by_email(&pool, "nonexistent@example.com").await;
    [1m[94m|[0m       [1m[91m^^^^^^[0m
[1m[94m...[0m
[1m[94m246[0m [1m[94m|[0m     result.is_err(),
    [1m[94m|[0m     [1m[94m------[0m [1m[94mtype must be known at this point[0m
    [1m[94m|[0m
[1m[96mhelp[0m: consider giving `result` an explicit type
    [1m[94m|[0m
[1m[94m243[0m [1m[94m| [0m  let result[92m: /* Type */[0m = get_user_by_email(&pool, "nonexistent@example.com").await;
    [1m[94m|[0m             [92m++++++++++++[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:260:15
    [1m[94m|[0m
[1m[94m260[0m [1m[94m|[0m   let users = list_users(&pool).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:270:32
    [1m[94m|[0m
[1m[94m270[0m [1m[94m|[0m   let user1: crate::db::User = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m                                [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:271:32
    [1m[94m|[0m
[1m[94m271[0m [1m[94m|[0m   let user2: crate::db::User = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m                                [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:272:32
    [1m[94m|[0m
[1m[94m272[0m [1m[94m|[0m   let user3: crate::db::User = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m                                [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:274:37
    [1m[94m|[0m
[1m[94m274[0m [1m[94m|[0m   let users: Vec<crate::db::User> = list_users(&pool).await.unwrap();
    [1m[94m|[0m                                     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:296:14
    [1m[94m|[0m
[1m[94m296[0m [1m[94m|[0m   let user = create_user(&pool, &new_user).await.unwrap();
    [1m[94m|[0m              [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:298:22
    [1m[94m|[0m
[1m[94m298[0m [1m[94m|[0m     let updated_user = update_user_email(&pool, &user.id, "newemail@example.com")
    [1m[94m|[0m [1m[91m ______________________^[0m
[1m[94m299[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:317:37
    [1m[94m|[0m
[1m[94m317[0m [1m[94m|[0m   let users: Vec<crate::db::User> = list_users(&pool).await.unwrap();
    [1m[94m|[0m                                     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:327:15
    [1m[94m|[0m
[1m[94m327[0m [1m[94m|[0m   let bead1 = create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:328:15
    [1m[94m|[0m
[1m[94m328[0m [1m[94m|[0m   let bead2 = create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:329:15
    [1m[94m|[0m
[1m[94m329[0m [1m[94m|[0m   let bead3 = create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:331:15
    [1m[94m|[0m
[1m[94m331[0m [1m[94m|[0m   let beads = list_beads(&pool).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:351:3
    [1m[94m|[0m
[1m[94m351[0m [1m[94m|[0m   create_bead(&pool, &create_test_bead(None)).await.unwrap(); // Open
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:355:3
    [1m[94m|[0m
[1m[94m355[0m [1m[94m|[0m   create_bead(&pool, &in_progress).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:359:3
    [1m[94m|[0m
[1m[94m359[0m [1m[94m|[0m   create_bead(&pool, &closed).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:361:20
    [1m[94m|[0m
[1m[94m361[0m [1m[94m|[0m   let open_beads = list_beads_by_status(&pool, BeadStatus::Open).await.unwrap();
    [1m[94m|[0m                    [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:364:27
    [1m[94m|[0m
[1m[94m364[0m [1m[94m|[0m     let in_progress_beads = list_beads_by_status(&pool, BeadStatus::InProgress)
    [1m[94m|[0m [1m[91m ___________________________^[0m
[1m[94m365[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:373:22
    [1m[94m|[0m
[1m[94m373[0m [1m[94m|[0m     let closed_beads = list_beads_by_status(&pool, BeadStatus::Closed)
    [1m[94m|[0m [1m[91m ______________________^[0m
[1m[94m374[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:378:23
    [1m[94m|[0m
[1m[94m378[0m [1m[94m|[0m     let blocked_beads = list_beads_by_status(&pool, BeadStatus::Blocked)
    [1m[94m|[0m [1m[91m _______________________^[0m
[1m[94m379[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:386:15
    [1m[94m|[0m
[1m[94m386[0m [1m[94m|[0m   let user1 = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:387:15
    [1m[94m|[0m
[1m[94m387[0m [1m[94m|[0m   let user2 = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:392:3
    [1m[94m|[0m
[1m[94m392[0m [1m[94m|[0m   create_bead(&pool, &bead1).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:396:3
    [1m[94m|[0m
[1m[94m396[0m [1m[94m|[0m   create_bead(&pool, &bead2).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:401:3
    [1m[94m|[0m
[1m[94m401[0m [1m[94m|[0m   create_bead(&pool, &bead3).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:406:3
    [1m[94m|[0m
[1m[94m406[0m [1m[94m|[0m   create_bead(&pool, &bead4).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:408:21
    [1m[94m|[0m
[1m[94m408[0m [1m[94m|[0m   let user1_beads = list_beads_by_user(&pool, &user1.id).await.unwrap();
    [1m[94m|[0m                     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:411:21
    [1m[94m|[0m
[1m[94m411[0m [1m[94m|[0m   let user2_beads = list_beads_by_user(&pool, &user2.id).await.unwrap();
    [1m[94m|[0m                     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:420:31
    [1m[94m|[0m
[1m[94m420[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &new_bead).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:423:22
    [1m[94m|[0m
[1m[94m423[0m [1m[94m|[0m     let updated_bead = update_bead_status(&pool, &bead.id, BeadStatus::InProgress)
    [1m[94m|[0m [1m[91m ______________________^[0m
[1m[94m424[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:437:31
    [1m[94m|[0m
[1m[94m437[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &new_bead).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:440:22
    [1m[94m|[0m
[1m[94m440[0m [1m[94m|[0m     let updated_bead = update_bead_priority(&pool, &bead.id, BeadPriority::HIGH)
    [1m[94m|[0m [1m[91m ______________________^[0m
[1m[94m441[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:450:31
    [1m[94m|[0m
[1m[94m450[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &new_bead).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:461:19
    [1m[94m|[0m
[1m[94m461[0m [1m[94m|[0m     let updated = update_bead_status(&pool, &bead.id, status).await.unwrap();
    [1m[94m|[0m                   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:469:7
    [1m[94m|[0m
[1m[94m469[0m [1m[94m|[0m   let result = update_bead_status(&pool, &fake_id, BeadStatus::Closed).await;
    [1m[94m|[0m       [1m[91m^^^^^^[0m
[1m[94m470[0m [1m[94m|[0m
[1m[94m471[0m [1m[94m|[0m   assert!(result.is_err(), "Should return error for non-existent bead");
    [1m[94m|[0m           [1m[94m------[0m [1m[94mtype must be known at this point[0m
    [1m[94m|[0m
[1m[96mhelp[0m: consider giving `result` an explicit type
    [1m[94m|[0m
[1m[94m469[0m [1m[94m| [0m  let result[92m: /* Type */[0m = update_bead_status(&pool, &fake_id, BeadStatus::Closed).await;
    [1m[94m|[0m             [92m++++++++++++[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:486:31
    [1m[94m|[0m
[1m[94m486[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &new_bead).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:492:7
    [1m[94m|[0m
[1m[94m492[0m [1m[94m|[0m   let fetch_result = get_bead(&pool, &bead.id).await;
    [1m[94m|[0m       [1m[91m^^^^^^^^^^^^[0m
[1m[94m493[0m [1m[94m|[0m   assert!(fetch_result.is_err(), "Bead should no longer exist");
    [1m[94m|[0m           [1m[94m------------[0m [1m[94mtype must be known at this point[0m
    [1m[94m|[0m
[1m[96mhelp[0m: consider giving `fetch_result` an explicit type
    [1m[94m|[0m
[1m[94m492[0m [1m[94m| [0m  let fetch_result[92m: /* Type */[0m = get_bead(&pool, &bead.id).await;
    [1m[94m|[0m                   [92m++++++++++++[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:499:7
    [1m[94m|[0m
[1m[94m499[0m [1m[94m|[0m   let result = delete_bead(&pool, &fake_id).await;
    [1m[94m|[0m       [1m[91m^^^^^^[0m
[1m[94m500[0m [1m[94m|[0m
[1m[94m501[0m [1m[94m|[0m   assert!(result.is_err(), "Should return error for non-existent bead");
    [1m[94m|[0m           [1m[94m------[0m [1m[94mtype must be known at this point[0m
    [1m[94m|[0m
[1m[96mhelp[0m: consider giving `result` an explicit type
    [1m[94m|[0m
[1m[94m499[0m [1m[94m| [0m  let result[92m: /* Type */[0m = delete_bead(&pool, &fake_id).await;
    [1m[94m|[0m             [92m++++++++++++[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:514:15
    [1m[94m|[0m
[1m[94m514[0m [1m[94m|[0m   let count = count_beads(&pool).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:518:3
    [1m[94m|[0m
[1m[94m518[0m [1m[94m|[0m   create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:519:3
    [1m[94m|[0m
[1m[94m519[0m [1m[94m|[0m   create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:520:3
    [1m[94m|[0m
[1m[94m520[0m [1m[94m|[0m   create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:522:15
    [1m[94m|[0m
[1m[94m522[0m [1m[94m|[0m   let count = count_beads(&pool).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:526:31
    [1m[94m|[0m
[1m[94m526[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:527:3
    [1m[94m|[0m
[1m[94m527[0m [1m[94m|[0m   delete_bead(&pool, &bead.id).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:529:15
    [1m[94m|[0m
[1m[94m529[0m [1m[94m|[0m   let count = count_beads(&pool).await.unwrap();
    [1m[94m|[0m               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:538:14
    [1m[94m|[0m
[1m[94m538[0m [1m[94m|[0m   let user = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m              [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:544:5
    [1m[94m|[0m
[1m[94m544[0m [1m[94m|[0m     create_bead(&pool, &bead).await.unwrap();
    [1m[94m|[0m     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:548:20
    [1m[94m|[0m
[1m[94m548[0m [1m[94m|[0m   let user_beads = list_beads_by_user(&pool, &user.id).await.unwrap();
    [1m[94m|[0m                    [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:552:3
    [1m[94m|[0m
[1m[94m552[0m [1m[94m|[0m   delete_user(&pool, &user.id).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:554:20
    [1m[94m|[0m
[1m[94m554[0m [1m[94m|[0m   let user_beads = list_beads_by_user(&pool, &user.id).await.unwrap();
    [1m[94m|[0m                    [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:561:19
    [1m[94m|[0m
[1m[94m561[0m [1m[94m|[0m   let all_beads = list_beads(&pool).await.unwrap();
    [1m[94m|[0m                   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:572:31
    [1m[94m|[0m
[1m[94m572[0m [1m[94m|[0m   let user: crate::db::User = create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:576:31
    [1m[94m|[0m
[1m[94m576[0m [1m[94m|[0m   let bead: crate::db::Bead = create_bead(&pool, &bead).await.unwrap();
    [1m[94m|[0m                               [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:579:39
    [1m[94m|[0m
[1m[94m579[0m [1m[94m|[0m   let fetched_user: crate::db::User = get_user(&pool, &user.id).await.unwrap();
    [1m[94m|[0m                                       [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:582:39
    [1m[94m|[0m
[1m[94m582[0m [1m[94m|[0m   let fetched_bead: crate::db::Bead = get_bead(&pool, &bead.id).await.unwrap();
    [1m[94m|[0m                                       [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:586:39
    [1m[94m|[0m
[1m[94m586[0m [1m[94m|[0m     let updated_user: crate::db::User = update_user_role(&pool, &user.id, UserRole::Admin)
    [1m[94m|[0m [1m[91m _______________________________________^[0m
[1m[94m587[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:591:39
    [1m[94m|[0m
[1m[94m591[0m [1m[94m|[0m     let updated_bead: crate::db::Bead = update_bead_status(&pool, &bead.id, BeadStatus::Closed)
    [1m[94m|[0m [1m[91m _______________________________________^[0m
[1m[94m592[0m [1m[94m|[0m [1m[91m|[0m     .await
    [1m[94m|[0m [1m[91m|__________^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:597:3
    [1m[94m|[0m
[1m[94m597[0m [1m[94m|[0m   delete_bead(&pool, &bead.id).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:598:3
    [1m[94m|[0m
[1m[94m598[0m [1m[94m|[0m   delete_user(&pool, &user.id).await.unwrap();
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:601:11
    [1m[94m|[0m
[1m[94m601[0m [1m[94m|[0m   assert!(get_user(&pool, &user.id).await.is_err());
    [1m[94m|[0m           [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:602:11
    [1m[94m|[0m
[1m[94m602[0m [1m[94m|[0m   assert!(get_bead(&pool, &bead.id).await.is_err());
    [1m[94m|[0m           [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:609:5
    [1m[94m|[0m
[1m[94m609[0m [1m[94m|[0m     create_user(&pool, &create_test_user()).await.unwrap();
    [1m[94m|[0m     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:613:5
    [1m[94m|[0m
[1m[94m613[0m [1m[94m|[0m     create_bead(&pool, &create_test_bead(None)).await.unwrap();
    [1m[94m|[0m     [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:616:27
    [1m[94m|[0m
[1m[94m616[0m [1m[94m|[0m   let user_count: usize = count_users(&pool).await.unwrap();
    [1m[94m|[0m                           [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[E0282][0m[1m: type annotations needed[0m
   [1m[94m--> [0mclarity-core/src/db/tests/integration_test.rs:617:27
    [1m[94m|[0m
[1m[94m617[0m [1m[94m|[0m   let bead_count: usize = count_beads(&pool).await.unwrap();
    [1m[94m|[0m                           [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^[0m [1m[91mcannot infer type[0m

[1m[91merror[0m[1m: docs for function returning `Result` missing `# Errors` section[0m
   [1m[94m--> [0mclarity-core/src/db/models.rs:147:3
    [1m[94m|[0m
[1m[94m147[0m [1m[94m|[0m   pub fn from_str(s: &str) -> DbResult<Self> {
    [1m[94m|[0m   [1m[91m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m
    [1m[94m|[0m
    [1m[94m= [0m[1mhelp[0m: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    [1m[94m= [0m[1mnote[0m: `-D clippy::missing-errors-doc` implied by `-D warnings`
    [1m[94m= [0m[1mhelp[0m: to override `-D warnings` add `#[allow(clippy::missing_errors_doc)]`

[1m[91merror[0m[1m: method `from_str` can be confused for the standard trait method `std::str::FromStr::from_str`[0m
   [1m[94m--> [0mclarity-core/src/db/models.rs:147:3
    [1m[94m|[0m
[1m[94m147[0m [1m[94m|[0m [1m[91m/[0m   pub fn from_str(s: &str) -> DbResult<Self> {
[1m[94m148[0m [1m[94m|[0m [1m[91m|[0m     match s.to_lowercase().as_str() {
[1m[94m149[0m [1m[94m|[0m [1m[91m|[0m       "admin" => Ok(UserRole::Admin),
[1m[94m150[0m [1m[94m|[0m [1m[91m|[0m       "user" => Ok(UserRole::User),
[1m[94m...[0m   [1m[91m|[0m
[1m[94m153[0m [1m[94m|[0m [1m[91m|[0m   }
    [1m[94m|[0m [1m[91m|___^[0m
    [1m[94m|[0m
    [1m[94m= [0m[1mhelp[0m: consider implementing the trait `std::str::FromStr` or choosing a less ambiguous method name
    [1m[94m= [0m[1mhelp[0m: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#should_implement_trait
    [1m[94m= [0m[1mnote[0m: `-D clippy::should-implement-trait` implied by `-D warnings`
    [1m[94m= [0m[1mhelp[0m: to override `-D warnings` add `#[allow(clippy::should_implement_trait)]`

[1m[91merror[0m[1m: unnecessary structure name repetition[0m
   [1m[94m--> [0mclarity-core/src/db/models.rs:149:21
    [1m[94m|[0m
[1m[94m149[0m [1m[94m|[0m       "admin" => Ok(UserRole::Admin),
    [1m[94m|[0m                     [1m[91m^^^^^^^^[0m [1m[91mhelp: use the applicable keyword: `Self`[0m
    [1m[94m|[0m
    [1m[94m= [0m[1mhelp[0m: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#use_self
    [1m[94m= [0m[1mnote[0m: `-D clippy::use-self` implied by `-D warnings`
    [1m[94m= [0m[1mhelp[0m: to override `-D warnings` add `#[allow(clippy::use_self)]`

[1m[91merror[0m[1m: unnecessary structure name repetition[0m
   [1m[94m--> [0mclarity-core/src/db/models.rs:150:20
    [1m[94m|[0m
[1m[94m150[0m [1m[94m|[0m       "user" => Ok(UserRole::User),
    [1m[94m|[0m                    [1m[91m^^^^^^^^[0m [1m[91mhelp: use the applicable keyword: `Self`[0m
    [1m[94m|[0m
    [1m[94m= [0m[1mhelp[0m: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#use_self

[1m[91merror[0m[1m: unnecessary structure name repetition[0m
   [1m[94m--> [0mclarity-core/src/db/models.rs:160:5
    [1m[94m|[0m
[1m[94m160[0m [1m[94m|[0m     UserRole::from_str(s)
    [1m[94m|[0m     [1m[91m^^^^^^^^[0m [1m[91mhelp: use the applicable keyword: `Self`[0m
    [1m[94m|[0m
    [1m[94m= [0m[1mhelp[0m: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#use_self

[1m[91merror[0m: could not compile `clarity-core` (lib) due to 5 previous errors
[1m[33mwarning[0m: build failed, waiting for other jobs to finish...
[1mSome errors have detailed explanations: E0282, E0432.[0m
[1mFor more information about an error, try `rustc --explain E0282`.[0m
[1m[91merror[0m: could not compile `clarity-core` (lib test) due to 73 previous errors
