# Moon tasks configuration
# This file defines custom tasks for the project

tasks:
  # Build the core library
  build-core:
    command: "cargo build"
    cwd: "clarity-core"
    dependencies:
      - build-core

  # Build the server
  build-server:
    command: "cargo build"
    cwd: "clarity-server"
    dependencies:
      - build-core

  # Build the client
  build-client:
    command: "cargo build"
    cwd: "clarity-client"
    dependencies:
      - build-core

  # Run the server
  run-server:
    command: "cargo run"
    cwd: "clarity-server"
    dependencies:
      - build-server

  # Run the client
  run-client:
    command: "cargo run"
    cwd: "clarity-client"
    dependencies:
      - build-client

  # Run all builds
  build:
    command: "cargo build --all"
    cwd: "."

  # Run all tests
  test:
    command: "cargo test"
    cwd: "."

  # Format code
  fmt:
    command: "cargo fmt"
    cwd: "."

  # Lint code
  clippy:
    command: "cargo clippy"
    cwd: "."

  # Run with bazel-remote caching
  build-bazel:
    command: "bazel build //clarity-core:clarity_core //clarity-server:clarity_server //clarity-client:clarity_client"
    cwd: "."